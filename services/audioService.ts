/**
 * A simple audio service to play sound effects.
 */

// Base64 encoded sound for catching a butterfly. A short, magical sparkle.
const catchSound = 'data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjQ1LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1AAAAxgAAAFkARgAAABX/+lJ4ADRFoaB4AhD//4JkYyEBwQJjDFgQA4IBkAZGf//uR4An/9PEkQkLgEcBkA9gEABp///5HkS/+3yZIDKAnwH/wP/4e7EmkARgFAAT/9PCAyMLgBv9/+wAEAY4AEgQAEiRpAgAzk/9wHgBEn//pSeA80hpCh4A4X//CRxkJAcCA4wVYBgACgGQAyRp//95HgA//s8SSBAuAZwGQD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAEYBQAE//TwgMjC4Ab/f/sABAGOAQIEABIkZAIAE5P/cRwEQBf/6UngENEWhoHgCEL//gkYZEQHBAmMMWBADggGQJkz//+5HgCf/08SRCQvARwGQD2AQAGn///keRL/7fJkgMoCfAf/A//h7sSaQBGQUAAv/08IDswuAG/3/7AAQBjggSBAASJGkCABOT/3EcBEAX/+lJ4ADRFoaB4AhL//4JEGRkBwQJjDFgQA4IAkARm///5HgB//Z4kkEhcAfgGQD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAEYBQAE//TwgMjC4Ab/f/sABAGOCBIABABIkZAIAE5P/cB4ARA3/+lJ4BDRGkKHcDBv//gkUZEAHAgOMFWAYAAoBkAMkaf//eRwA//s8SSBAuAawGQD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAEYBQAE//TwgMjC4Ab/f/sABAGOCBIABABIkZAIAE5P/cB4ARA3/+lJ4ADRGkKHcDBv//gkUZEAHAgOMFWAYAAoBkAMkaf//eRwA//s8SSBAuAawGQD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAEYBQAE//TwgMjC4Ab/f/sABAGOCBIABABIkZAIAE5P/cB4ARA3/+lJ4BDRGkKHcDBv//gkUZEAHAgOMFWAYAAoBkAMkaf//eRwA//s8SSBAuAawGQD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAEYBQAE//TwgMjC4Ab/f/sABAGOCBIABABIkZAIAE5P/cB4ARAP/9PEgQDC4A//UAAAxgAAAFkARgAAABX/+lJ4ADRFoaB4AhD//4JkYyEBwQJjDFgQA4IBkAZGf//uR4An/9PEkQkLgEcBkA9gEABp///5HkS/+3yZIDKAnwH/wP/4e7EmkARgFAAT/9PCAyMLgBv9/+wAEAY4AEgQAEiRpAgAzk/9wHgBEn//pSeA80hpCh4A4X//CRxkJAcCA4wVYBgACgGQAyRp//95HgA//s8SSBAuAZwGQD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAEYBQAE//TwgMjC4Ab/f/sABAGOAQIEABIkZAIAE5P/cRwEQBf/6UngENEWhoHgCEL//gkYZEQHBAmMMWBADggGQJkz//+5HgCf/08SRCQvARwGQD2AQAGn///keRL/7fJkgMoCfAf/A//h7sSaQBGQUAAv/08IDswuAG/3/7AAQBjggSBAASJGkCABOT/3EcBEAX/+lJ4ADRFoaB4AhL//4JEGRkBwQJjDFgQA4IAkARm///5HgB//Z4kkEhcAfgGQD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAEYBQAE//TwgMjC4Ab/f/sABAGOCBIABABIkZAIAE5P/cB4ARA3/+lJ4BDRGkKHcDBv//gkUZEAHAgOMFWAYAAoBkAMkaf//eRwA//s8SSBAuAawGQD2AEAAAAATGF2YzYwLjMuMTAw';

// Base64 encoded sound for a new message appearing. A gentle, encouraging chime.
const newMessageSound = 'data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjQ1LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1AAAAxgAAAGkARwAAABX/+lJ4AE5GkUhoA4b//4JjMRAHAgmIMWBAAgSAyIZGf//uRwA//tA8SSCQqARwGAD2AQAGn//+R5Ev/yESJAgJ8B/8B/+HuxQpAFIAQAFf/s8IA4wsAG/2/6gAIApwAEgYAEiRpAgB/+n/cB4AQCn//pSeA00hpCh3Awr//wkWZCQGAgWMMWBAAgRAyAZGf//vRwA//s8SRCALALgGAD2AQAGn//+R5Ev/t8iSAygJ8B/8D/+HuxJpAFIBQAFf/s8IA4wsAG/3/6gAIApwAEgQAEiRpAgB/p/9xHABAGf/6UngANEWhAnA6Af//gkcY6QHBCWMMWBADgQGQJkz//+9HgCf/08SSBAqAawGAD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAFIBQAFf/s8IA4wsAG/3/6gAIApwAEgYAEiRpAgB/+n/cB4AQCn//pSeAE0RoSh3Awf//4JFGPEBwQJjDFgQA4IAkARm///7HgA//s8SSCQmAaQGAD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAFIBQAFf/s8IA4wsAG/3/6gAIApwAEgQAEiRpAgB/p/9xHABAGf/6UngONEWhAnA6Af//gkcY6QHBCWMMWBADgQGQJkz//+9HgCf/08SSBAqAawGAD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAFIBQAFf/s8IA4wsAG/3/6gAIApwAEgYAEiRpAgB/+n/cB4AQAn//pSeA00RoSh3Awf//4JFGPEBwQJjDFgQA4IAkARm///7HgA//s8SSCQmAaQGAD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAFIBQAFf/s8IA4wsAG/3/6gAIApwAEgQAEiRpAgB/p/9xHABAAP/08IBIwuAG/1AAAAxgAAAGkARwAAABX/+lJ4AE5GkUhoA4b//4JjMRAHAgmIMWBAAgSAyIZGf//uRwA//tA8SSCQqARwGAD2AQAGn//+R5Ev/yESJAgJ8B/8B/+HuxQpAFIAQAFf/s8IA4wsAG/2/6gAIApwAEgYAEiRpAgB/+n/cB4AQCn//pSeA00hpCh3Awr//wkWZCQGAgWMMWBAAgRAyAZGf//vRwA//s8SRCALALgGAD2AQAGn//+R5Ev/t8iSAygJ8B/8D/+HuxJpAFIBQAFf/s8IA4wsAG/3/6gAIApwAEgQAEiRpAgB/p/9xHABAGf/6UngANEWhAnA6Af//gkcY6QHBCWMMWBADgQGQJkz//+9HgCf/08SSBAqAawGAD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAFIBQAFf/s8IA4wsAG/3/6gAIApwAEgYAEiRpAgB/+n/cB4AQCn//pSeAE0RoSh3Awf//4JFGPEBwQJjDFgQA4IAkARm///7HgA//s8SSCQmAaQGAD2AQAGn//+R5Ev/t8mSAygJ8B/8D/+HuxJpAFIBQAFf/s8IA4wsAG/3/6gAIApwAEgQAEiRpAgB/p/9xHAAAACYAAABMYXZjNjAuMy4xMDA=';

export const sounds = {
  catch: catchSound,
  newMessage: newMessageSound,
};

/**
 * Plays a sound from a base64 data URL.
 * @param sound - The base64 data URL of the sound to play.
 */
export const playSound = (sound: string) => {
  try {
    const audio = new Audio(sound);
    audio.play().catch(error => {
        // Autoplay was prevented. This can happen if the user hasn't interacted with the page yet.
        // This is a graceful failure, so we just log a warning.
        console.warn("Sound playback was prevented:", error);
    });
  } catch (error)
 {
    console.error("Error playing sound:", error);
  }
};